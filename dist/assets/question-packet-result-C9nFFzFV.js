import{a as b,V as z}from"./VGrid-kfzIXTLE.js";import{_ as N,f as i,u as P,N as D,g as C,o as c,c as k,a as s,d as t,w as e,X as T,b as A,V as B,t as f,F as w,h as q,e as V,K as L,R as F,S as O}from"./index-CxGBsiJy.js";import{c as y,a as _,b as v,d as S,V as I}from"./VCard-BXhNMxBu.js";import{V as E}from"./VChip-D1_jAy3K.js";import"./VImg-CxLPZliN.js";import"./index-BECXFEr0.js";const h=m=>(F("data-v-7a3fd575"),m=m(),O(),m),K={style:{"max-block-size":"300px","overflow-y":"auto"}},X={class:"me-n3",style:{padding:"20px"}},G={class:"me-n3",style:{display:"flex","flex-grow":"1",padding:"20px"}},H={style:{color:"#0080ff"}},J=h(()=>s("p",{style:{color:"black","padding-block-start":"15px"},class:"font-weight-semibold mb-1"},"Passing grade:",-1)),U=h(()=>s("p",{style:{color:"black","padding-block-start":"15px"},class:"font-weight-semibold mb-1"},[s("b",null,"66")],-1)),W=h(()=>s("p",{style:{color:"black","padding-block-start":"15px"},class:"font-weight-semibold mb-1"},"Soal yang dikerjakan:",-1)),Y={style:{color:"#0080ff","padding-block-start":"15px"},class:"font-weight-semibold mb-1"},Z={style:{"max-block-size":"300px","overflow-y":"auto"}},ee=h(()=>s("span",{style:{color:"#0080ff"}},"Analisis & Advice",-1)),te={class:"me-n3",style:{padding:"20px"}},ae={class:"me-n3",style:{padding:"20px"}},se=h(()=>s("span",{style:{color:"black"}},"List topik/diagnosis yang sebaiknya Anda tingkatkan pada latihan ini",-1)),oe={class:"d-flex align-center flex-wrap mb-3"},le={key:0},ne={class:"me-n3",style:{padding:"10px"}},re={style:{color:"black","padding-block-start":"15px"},class:"font-weight-semibold mb-1"},ie={__name:"QuestionResult",setup(m){const d=i({}),g=i([]),n=P();D();const r=i({}),x=i([]),Q=i([]);i([]);var u=localStorage.getItem("token");C(async()=>{await R(),await $(),await j()});const R=async()=>{if(u)try{const a=localStorage.getItem("paket");console.log("question packet id: "+a);const l=await b.get("https://gateway.berkompeten.com/api/student/user/test/result?id="+a,{headers:{Authorization:`Bearer ${u}`}});d.value=l.data.data}catch(a){a.response&&a.response.status===401&&(localStorage.removeItem("token"),localStorage.removeItem("profile"),n.push("/login"))}else n.push("/login")},$=async()=>{if(u)try{const a=localStorage.getItem("paket"),l=await b.get(`https://gateway.berkompeten.com/api/student/analys/result-by-question-packet-id?question_packet_id=${a}`,{headers:{Authorization:`Bearer ${u}`}});r.value=l.data.data,x.value=Object.entries(l.data.data.advise_learn_by_diagnose).map(([o,p])=>({subtopic:o,...p})),Q.value=Object.entries(l.data.data.advise_learn_by_topic).map(([o,p])=>({group_topic:o,subtopics:p}))}catch(a){a.response&&a.response.status===401&&(localStorage.removeItem("token"),n.push("/login"))}},j=async()=>{if(u)try{const a=localStorage.getItem("paket"),l=await b.get("https://gateway.berkompeten.com/api/student/user/skip/questions?id="+a,{headers:{Authorization:`Bearer ${u}`}});g.value=l.data.data}catch(a){a.response&&a.response.status===401&&(localStorage.removeItem("token"),localStorage.removeItem("profile"),n.push("/login"))}else n.push("/login")},M=async()=>{if(question_packet_id=localStorage.getItem("paket"),answer===null){errorMessage.value="Tolong pilih jawaban terlebih dahulu";return}if(answerValue===null){errorMessage.value="Tolong pilih seberapa yakin jawaban anda terlebih dahulu";return}if(question_id===null){errorMessage.value="question id is empty. please contact your administrator";return}try{n.push("/dashboard")}catch(a){console.error("answer failed:",a),a.response&&a.response.data?errorMessage.value=a.response.data.errors:errorMessage.value="An unexpected error occurred during login."}};return(a,l)=>(c(),k(w,null,[s("div",K,[t(I,{class:"outlined-card-item mb-4"},{default:e(()=>[t(y,{class:"text-left"},{append:e(()=>[t(T,{block:"",type:"submit",onClick:l[0]||(l[0]=o=>M()),color:"#0080ff"},{default:e(()=>[A("Lihat Pembahasan Soal")]),_:1})]),default:e(()=>[s("div",X,[t(_,{align:"center",class:"d-flex flex-wrap row-item-parent"},{default:e(()=>[t(z,{color:"#0080ff",rounded:"",size:"40",class:"elevation-2"},{default:e(()=>[t(B,{size:"32",icon:"ri-apps-line"})]),_:1}),s("div",G,[t(v,{cols:"6",md:"6"},{default:e(()=>[t(S,null,{default:e(()=>[s("span",H,[s("b",null,"Nilai Anda "+f(d.value.score),1)])]),_:1}),t(_,{align:"left",style:{"justify-content":"flex-start"}},{default:e(()=>[t(v,{cols:"6",md:"6"},{default:e(()=>[J,U]),_:1}),t(v,{cols:"6",md:"6"},{default:e(()=>[W,s("p",Y,f(d.value.total_answered)+" Soal",1)]),_:1})]),_:1})]),_:1})])]),_:1})])]),_:1})]),_:1})]),s("div",Z,[t(I,{class:"outlined-card-item mb-4"},{default:e(()=>[t(y,null,{default:e(()=>[t(S,null,{default:e(()=>[ee]),_:1}),s("div",te,[t(_,{align:"center",class:"d-flex flex-wrap row-item-parent"},{default:e(()=>[t(z,{color:"#0080ff",rounded:"",size:"40",class:"elevation-2"},{default:e(()=>[t(B,{size:"24",icon:"ri-apps-line"})]),_:1}),s("div",ae,[t(S,null,{default:e(()=>[se]),_:1})])]),_:1})])]),_:1}),t(_,{align:"center",class:"d-flex flex-wrap row-item"},{default:e(()=>[s("div",oe,[(c(!0),k(w,null,q(x.value,(o,p)=>(c(),V(E,{class:"d-flex flex-wrap v-item",color:"#0080ff",size:"small",key:p},{default:e(()=>[A(f(o.subtopic)+" ("+f(o.group_topic)+") ",1)]),_:2},1024))),128))])]),_:1})]),_:1})]),g.value.length!==0?(c(),k("div",le,[t(I,{class:"outlined-card-item mb-4"},{default:e(()=>[t(y,{style:{"max-block-size":"300px","overflow-y":"auto"}},{default:e(()=>[(c(!0),k(w,null,q(g.value,(o,p)=>(c(),V(y,{key:o.id,class:"outlined-card-item"},{default:e(()=>[s("div",ne,[t(_,{align:"center"},{default:e(()=>[s("p",re,f(o.question_number)+" "+f(o.question),1)]),_:2},1024)])]),_:2},1024))),128))]),_:1})]),_:1})])):L("",!0)],64))}},ce=N(ie,[["__scopeId","data-v-7a3fd575"]]),ge={__name:"question-packet-result",setup(m){const d=localStorage.getItem("token"),g=i(null),n=P();return C(async()=>{if(d)try{const r=await b.get("https://gateway.berkompeten.com/api/student/profile",{headers:{Authorization:`Bearer ${d}`}});g.value=r.data}catch(r){r.response&&r.response.status===401&&n.push("/login")}else n.push("/login")}),(r,x)=>(c(),V(_,{class:"match-height"},{default:e(()=>[t(v,{cols:"12",md:"12"},{default:e(()=>[t(ce)]),_:1})]),_:1}))}};export{ge as default};
