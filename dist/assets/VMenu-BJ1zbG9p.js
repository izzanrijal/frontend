import{u as e,b as a,V as t,m as n,a as o}from"./VOverlay-CJMSwVBS.js";import{f as l}from"./forwardRefs-BiNqQvLW.js";import{g as s,p as r,q as u,t as i,e as c,P as v,N as d,$ as p,a0 as f}from"./vuetify-BGzDg8SZ.js";import{t as m}from"./index-BAywq0Ob.js";import{c as y,b as g,d as w,s as E,j as V,x as b,v as x,y as D,p as P}from"./vendor-BrUfZ_qe.js";const j=r({id:String,...v(n({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:o}}),["absolute"])},"VMenu"),k=s()({name:"VMenu",props:j(),emits:{"update:modelValue":e=>!0},setup(n,o){let{slots:s}=o;const r=u(n,"modelValue"),{scopeId:v}=e(),j=i(),k=y((()=>n.id||`v-menu-${j}`)),T=g(),A=w(a,null),C=E(0);async function h(e){var a,t,n;const o=e.relatedTarget,l=e.target;if(await D(),r.value&&o!==l&&(null==(a=T.value)?void 0:a.contentEl)&&(null==(t=T.value)?void 0:t.globalTop)&&![document,T.value.contentEl].includes(l)&&!T.value.contentEl.contains(l)){null==(n=d(T.value.contentEl)[0])||n.focus()}}function S(){null==A||A.closeParents()}function K(e){var a,t,o;if(!n.disabled&&"Tab"===e.key){f(d(null==(a=T.value)?void 0:a.contentEl,!1),e.shiftKey?"prev":"next",(e=>e.tabIndex>=0))||(r.value=!1,null==(o=null==(t=T.value)?void 0:t.activatorEl)||o.focus())}}function M(e){var a;if(n.disabled)return;const t=null==(a=T.value)?void 0:a.contentEl;t&&r.value?"ArrowDown"===e.key?(e.preventDefault(),p(t,"next")):"ArrowUp"===e.key&&(e.preventDefault(),p(t,"prev")):["ArrowDown","ArrowUp"].includes(e.key)&&(r.value=!0,e.preventDefault(),setTimeout((()=>setTimeout((()=>M(e))))))}P(a,{register(){++C.value},unregister(){--C.value},closeParents(){setTimeout((()=>{C.value||(r.value=!1,null==A||A.closeParents())}),40)}}),V(r,(e=>{e?(null==A||A.register(),document.addEventListener("focusin",h,{once:!0})):(null==A||A.unregister(),document.removeEventListener("focusin",h))}));const U=y((()=>b({"aria-haspopup":"menu","aria-expanded":String(r.value),"aria-owns":k.value,onKeydown:M},n.activatorProps)));return c((()=>{const e=t.filterProps(n);return x(t,b({ref:T,class:["v-menu",n.class],style:n.style},e,{modelValue:r.value,"onUpdate:modelValue":e=>r.value=e,absolute:!0,activatorProps:U.value,"onClick:outside":S,onKeydown:K},v),{activator:s.activator,default:function(){for(var e=arguments.length,a=new Array(e),t=0;t<e;t++)a[t]=arguments[t];return x(m,{root:"VMenu"},{default:()=>{var e;return[null==(e=s.default)?void 0:e.call(s,...a)]}})}})})),l({id:k,"Î¨openChildren":C},T)}});export{k as V};
