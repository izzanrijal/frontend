import{a}from"./axios-fZjk1EK6.js";import{V as e,b as t,l as s,z as o,B as l,D as r,v as i,Y as u,u as p,I as n,O as d,R as m,S as c}from"./vendor-B8wJr56A.js";import{b as f,V as g,e as v,a as _}from"./VCard-BTRoFlXY.js";import{V as h,a as y}from"./VForm-DLjuBkGr.js";import{g as V}from"./index-BybbEtVx.js";import"./VGrid-BNFjx_dy.js";import"./vuetify-C3ORsIgB.js";import"./VImg-BQNpmpCN.js";import"./index-CGl-i1fy.js";import"./VInput-CdEx-irj.js";import"./forwardRefs-BiNqQvLW.js";const j={key:1,class:"mt-2 text-success"},k={key:2,class:"mt-2 text-danger",style:{color:"#ff5252"}},x={__name:"OtpVerification",setup(x){const w=e(),I=t(!1),b=t(""),S=t(""),z=t(""),O=localStorage.getItem("token");s((async()=>{try{const e=await a.get("https://gateway.berkompeten.id/api/student/change-password/status",{headers:{Authorization:`Bearer ${O}`}});I.value=e.data.data.otp_submitted}catch(e){e.response&&401===e.response.status&&(localStorage.removeItem("token"),localStorage.removeItem("profile"),w.push("/login"))}}));const B=async()=>{try{const e=await a.post("https://gateway.berkompeten.id/api/student/otp-verification",{otp:z},{headers:{Authorization:`Bearer ${O}`}});b.value=e.data.message,w.push("/profile/security")}catch(e){S.value=e.response.data.message}};return(a,e)=>(l(),o(_,null,{default:r((()=>[i(f,{cols:"12"},{default:r((()=>[i(g,{title:"Otp"},{default:r((()=>[i(h,null,{default:r((()=>[1==p(I)?(l(),o(v,{key:0},{default:r((()=>[i(_,null,{default:r((()=>[i(f,{cols:"12",md:"6"},{default:r((()=>[i(y,{modelValue:p(z),"onUpdate:modelValue":e[0]||(e[0]=a=>n(z)?z.value=a:null),label:"OTP",autocomplete:"on",placeholder:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})):u("",!0),i(v,{class:"d-flex flex-wrap gap-4"},{default:r((()=>[1==p(I)?(l(),o(V,{key:0,onClick:B},{default:r((()=>[m("Save changes")])),_:1})):u("",!0),p(b)?(l(),d("div",j,c(p(b)),1)):u("",!0),p(S)?(l(),d("div",k,c(p(S)),1)):u("",!0)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}))}},w={__name:"otp",setup:a=>(a,e)=>(l(),d("div",null,[i(x)]))};export{w as default};
