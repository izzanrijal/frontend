import{a}from"./axios-fZjk1EK6.js";import{V as e,b as t,l as s,z as o,B as l,D as r,v as i,W as p,u,I as n,O as d,R as m,S as c}from"./vendor-BrUfZ_qe.js";import{b as f,V as g,e as v,a as _}from"./VCard-DQMXF3Nm.js";import{V as h,a as y}from"./VForm-Cja6eDMe.js";import{g as V}from"./index-BAywq0Ob.js";import"./VGrid-DpcPUu2X.js";import"./vuetify-BGzDg8SZ.js";import"./VImg-B_JtkRwX.js";import"./index-xgti94jS.js";import"./VInput-Hwser3Zj.js";import"./forwardRefs-BiNqQvLW.js";const j={key:1,class:"mt-2 text-success"},k={key:2,class:"mt-2 text-danger",style:{color:"#ff5252"}},w={__name:"OtpVerification",setup(w){const x=e(),b=t(!1),I=t(""),S=t(""),O=t(""),z=localStorage.getItem("token");s((async()=>{try{const e=await a.get("https://gateway.berkompeten.id/api/student/change-password/status",{headers:{Authorization:`Bearer ${z}`}});b.value=e.data.data.otp_submitted}catch(e){e.response&&401===e.response.status&&(localStorage.removeItem("token"),localStorage.removeItem("profile"),x.push("/login"))}}));const A=async()=>{try{const e=await a.post("https://gateway.berkompeten.id/api/student/otp-verification",{otp:O},{headers:{Authorization:`Bearer ${z}`}});I.value=e.data.message,x.push("/profile/security")}catch(e){S.value=e.response.data.message}};return(a,e)=>(l(),o(_,null,{default:r((()=>[i(f,{cols:"12"},{default:r((()=>[i(g,{title:"Otp"},{default:r((()=>[i(h,null,{default:r((()=>[1==u(b)?(l(),o(v,{key:0},{default:r((()=>[i(_,null,{default:r((()=>[i(f,{cols:"12",md:"6"},{default:r((()=>[i(y,{modelValue:u(O),"onUpdate:modelValue":e[0]||(e[0]=a=>n(O)?O.value=a:null),label:"OTP",autocomplete:"on",placeholder:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})):p("",!0),i(v,{class:"d-flex flex-wrap gap-4"},{default:r((()=>[1==u(b)?(l(),o(V,{key:0,onClick:A},{default:r((()=>[m("Save changes")])),_:1})):p("",!0),u(I)?(l(),d("div",j,c(u(I)),1)):p("",!0),u(S)?(l(),d("div",k,c(u(S)),1)):p("",!0)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}))}},x={__name:"otp",setup:a=>(a,e)=>(l(),d("div",null,[i(w)]))};export{x as default};
