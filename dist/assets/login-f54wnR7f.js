import{_ as j,u as q,at as D,f as u,A as H,Z as J,g as U,c as b,d as s,w as o,J as a,o as m,a as i,$ as y,e as I,F as Z,h as K,K as S,X as O,b as w,t as L,P as X,R as G,S as Q}from"./index-CFfQD6KI.js";import{_ as z,a as W,b as Y}from"./auth-v1-tree-QKWYtU5m.js";import{l as ee}from"./berkompeten_logo-eijgBe6e.js";import{a as se,b as ae}from"./auth-v1-mask-light-Dw7KYw8D.js";import{a as te}from"./VGrid-ukUykM_g.js";import{V as oe,c as re,e as T,a as le,b as p}from"./VCard-BkM11dtO.js";import{V as k}from"./VImg-C-Xm8kAh.js";import{V as ne,a as C}from"./VForm-DjC494Xt.js";import{a as ie,V as de}from"./VList-Bf7H2foI.js";import{V as ce}from"./VCheckbox-D1nyFlBw.js";import{V as E}from"./VDivider-CbALn80v.js";import{V as ue}from"./VListItemTitle-DqQtqlFs.js";import"./index-CmYAEvk7.js";import"./VInput-BY6qN6On.js";import"./forwardRefs-DWGaNmQL.js";import"./ssrBoot-51i722n3.js";import"./VSelectionControl-CMp7I5oB.js";const v=f=>(G("data-v-01b2787c"),f=f(),Q(),f),me={class:"auth-wrapper d-flex align-center justify-center pa-4"},pe={class:"d-flex"},fe=["innerHTML"],ge=v(()=>i("h5",{class:"text-h5 font-weight-semibold mb-1"}," Hai Selamat Datang! ",-1)),he=v(()=>i("p",{class:"mb-0"}," Please sign-in to your account and start the adventure ",-1)),_e={class:"d-flex align-center justify-space-between flex-wrap mt-1 mb-4"},ve={class:"g-recaptcha","data-sitekey":"6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI","data-callback":"login"},Ve={key:0,class:"mt-2 text-danger",style:{color:"#ff5252"}},be=v(()=>i("span",null,"New on our platform?",-1)),we=v(()=>i("span",{class:"mx-4"},"or",-1)),ke={__name:"login",setup(f){const d=q(),t=D({email:"",password:"",remember:!1}),c=u([]),M=H(),g=u(!1),V=u([]),A=J(()=>M.global.name.value==="light"?se:ae),h=u(!1),n=u(null);var x=localStorage.getItem("token");const N=()=>{const r=t.email.toLowerCase();V.value=c.value.filter(e=>e.toLowerCase().includes(r))},F=r=>{t.email=r,g.value=!1},B=()=>{setTimeout(()=>g.value=!1,200)};U(async()=>{console.log("token login: ",x),x&&d.push("/dashboard");const r=JSON.parse(localStorage.getItem("savedEmails"))||[];c.value=r});const P=r=>{c.value.includes(r)||(c.value.push(r),localStorage.setItem("savedEmails",JSON.stringify(c.value)))},R=async r=>{try{grecaptcha.ready(async function(){try{if(console.log("rec resp: ",r),t.email===""){n.value="email is required";return}if(t.password===""){n.value="password is required";return}if(t.password.length<8){n.value="password length must be 8 character or more";return}const e=await te.post("/api/student/login",{email:t.email,password:t.password,"g-recaptcha-response":r});console.log(e);const _=e.data.token;console.log(_),localStorage.setItem("token",_),P(t.email),d.push("/dashboard")}catch(e){if(console.error("Login failed:",e),e.response&&e.response.data){n.value=e.response.data.message,e.response.data.errors&&(n.value=e.response.data.errors),e.response.data.is_exist===!1&&(localStorage.setItem("email",t.email),d.push("/register"));return}else{n.value="An unexpected error occurred during login.";return}}})}catch(e){if(console.error("Login failed:",e),e.response&&e.response.data){n.value=e.response.data.errors,e.response.data.is_exist===!1&&(localStorage.setItem("email",t.email),d.push("/register"));return}else{n.value="An unexpected error occurred during login.";return}}},$=()=>{d.push("/forgot-password")};return(r,e)=>{const _=X("RouterLink");return m(),b("div",me,[s(oe,{class:"auth-card pa-4 pt-7","max-width":"448"},{default:o(()=>[s(re,{class:"justify-center"},{prepend:o(()=>[i("div",pe,[i("div",{innerHTML:a(ee)},null,8,fe)])]),_:1}),s(T,{class:"pt-2"},{default:o(()=>[ge,he]),_:1}),s(T,null,{default:o(()=>[s(ne,{onSubmit:y(R,["prevent"])},{default:o(()=>[s(le,null,{default:o(()=>[s(p,{cols:"12"},{default:o(()=>[s(C,{modelValue:a(t).email,"onUpdate:modelValue":e[0]||(e[0]=l=>a(t).email=l),label:"Email",placeholder:"Enter your email",clearable:"",autocomplete:"off",onFocus:e[1]||(e[1]=l=>g.value=!0),onBlur:B,onInput:N},null,8,["modelValue"]),a(g)&&a(V).length?(m(),I(ie,{key:0,class:"suggestions-list"},{default:o(()=>[(m(!0),b(Z,null,K(a(V),l=>(m(),I(de,{key:l,onMousedown:y(xe=>F(l),["prevent"])},{default:o(()=>[s(ue,null,{default:o(()=>[w(L(l),1)]),_:2},1024)]),_:2},1032,["onMousedown"]))),128))]),_:1})):S("",!0)]),_:1}),s(p,{cols:"12"},{default:o(()=>[s(C,{modelValue:a(t).password,"onUpdate:modelValue":e[2]||(e[2]=l=>a(t).password=l),label:"Password",placeholder:"············",type:a(h)?"text":"password","append-inner-icon":a(h)?"ri-eye-off-line":"ri-eye-line","onClick:appendInner":e[3]||(e[3]=l=>h.value=!a(h))},null,8,["modelValue","type","append-inner-icon"]),i("div",_e,[s(ce,{modelValue:a(t).remember,"onUpdate:modelValue":e[4]||(e[4]=l=>a(t).remember=l),label:"Remember me"},null,8,["modelValue"]),i("a",{class:"ms-2 mb-1",onClick:$}," Forgot Password? ")]),i("div",ve,[s(O,{block:"",type:"submit",color:"#0080ff"},{default:o(()=>[w(" Login ")]),_:1})]),a(n)?(m(),b("div",Ve,L(a(n)),1)):S("",!0)]),_:1}),s(p,{cols:"12",class:"text-center text-base"},{default:o(()=>[be,s(_,{class:"text-primary ms-2",to:"/register"},{default:o(()=>[w(" Create an account ")]),_:1})]),_:1}),s(p,{cols:"12",class:"d-flex align-center"},{default:o(()=>[s(E),we,s(E)]),_:1}),s(p,{cols:"12",class:"text-center"},{default:o(()=>[s(z)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),s(k,{class:"auth-footer-start-tree d-none d-md-block",src:a(W),width:250},null,8,["src"]),s(k,{src:a(Y),class:"auth-footer-end-tree d-none d-md-block",width:350},null,8,["src"]),s(k,{class:"auth-footer-mask d-none d-md-block",src:a(A)},null,8,["src"])])}}},De=j(ke,[["__scopeId","data-v-01b2787c"]]);export{De as default};
