import{_ as C,u as S,a8 as L,z as M,Z as A,f as _,g as N,c as V,d as a,w as t,H as s,o as b,a as l,au as P,X as R,b as w,t as F,J as H,O as j,Q as B,R as D}from"./index-E_CIY7Am.js";import{_ as E,a as U,b as q}from"./auth-v1-tree-BO7oAgSl.js";import{l as Z}from"./berkompeten_logo-eijgBe6e.js";import{a as J,b as Q}from"./auth-v1-mask-light-Dw7KYw8D.js";import{a as X}from"./VGrid-DnbcOfFJ.js";import{V as $,c as z,e as v,a as G,b as d}from"./VCard-Car-97K3.js";import{V as g}from"./VImg-BWpbGBte.js";import{V as K,a as x}from"./VTextField-TUdTlMhC.js";import{V as O}from"./VCheckbox-UdUGNBaP.js";import{V as k}from"./VDivider-NYEtZB5-.js";import"./VInput-4mTJhSTp.js";import"./index-B940bmHz.js";import"./forwardRefs-DWGaNmQL.js";import"./VSelectionControl-CXvZpVzg.js";const f=c=>(B("data-v-94cc5257"),c=c(),D(),c),W={class:"auth-wrapper d-flex align-center justify-center pa-4"},Y={class:"d-flex"},ee=["innerHTML"],ae=f(()=>l("h5",{class:"text-h5 font-weight-semibold mb-1"}," Hai Selamat Datang! ",-1)),se=f(()=>l("p",{class:"mb-0"}," Please sign-in to your account and start the adventure ",-1)),oe={class:"d-flex align-center justify-space-between flex-wrap mt-1 mb-4"},te={class:"g-recaptcha","data-sitekey":"6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI","data-callback":"login"},re={key:0,class:"mt-2 text-danger",style:{color:"#ff5252"}},le=f(()=>l("span",null,"New on our platform?",-1)),ne=f(()=>l("span",{class:"mx-4"},"or",-1)),ie={__name:"login",setup(c){const u=S(),o=L({email:"",password:"",remember:!1}),y=M(),I=A(()=>y.global.name.value==="light"?J:Q),m=_(!1),r=_(null);var h=localStorage.getItem("token");N(async()=>{console.log("token login: ",h),h&&u.push("/dashboard")});const T=async i=>{try{grecaptcha.ready(async function(){try{if(console.log("rec resp: ",i),o.email===""){r.value="email is required";return}if(o.password===""){r.value="password is required";return}if(o.password.length<8){r.value="password length must be 8 character or more";return}const e=await X.post("https://gateway.berkompeten.com/api/student/login",{email:o.email,password:o.password,"g-recaptcha-response":i});console.log(e);const p=e.data.token;console.log(p),localStorage.setItem("token",p),u.push("/dashboard")}catch(e){if(console.error("Login failed:",e),e.response&&e.response.data){r.value=e.response.data.message,e.response.data.errors&&(r.value=e.response.data.errors),e.response.data.is_exist===!1&&(localStorage.setItem("email",o.email),u.push("/register"));return}else{r.value="An unexpected error occurred during login.";return}}})}catch(e){if(console.error("Login failed:",e),e.response&&e.response.data){r.value=e.response.data.errors,e.response.data.is_exist===!1&&(localStorage.setItem("email",o.email),u.push("/register"));return}else{r.value="An unexpected error occurred during login.";return}}};return(i,e)=>{const p=j("RouterLink");return b(),V("div",W,[a($,{class:"auth-card pa-4 pt-7","max-width":"448"},{default:t(()=>[a(z,{class:"justify-center"},{prepend:t(()=>[l("div",Y,[l("div",{innerHTML:s(Z)},null,8,ee)])]),_:1}),a(v,{class:"pt-2"},{default:t(()=>[ae,se]),_:1}),a(v,null,{default:t(()=>[a(K,{onSubmit:P(T,["prevent"])},{default:t(()=>[a(G,null,{default:t(()=>[a(d,{cols:"12"},{default:t(()=>[a(x,{modelValue:s(o).email,"onUpdate:modelValue":e[0]||(e[0]=n=>s(o).email=n),label:"Email",type:"email"},null,8,["modelValue"])]),_:1}),a(d,{cols:"12"},{default:t(()=>[a(x,{modelValue:s(o).password,"onUpdate:modelValue":e[1]||(e[1]=n=>s(o).password=n),label:"Password",placeholder:"············",type:s(m)?"text":"password","append-inner-icon":s(m)?"ri-eye-off-line":"ri-eye-line","onClick:appendInner":e[2]||(e[2]=n=>m.value=!s(m))},null,8,["modelValue","type","append-inner-icon"]),l("div",oe,[a(O,{modelValue:s(o).remember,"onUpdate:modelValue":e[3]||(e[3]=n=>s(o).remember=n),label:"Remember me"},null,8,["modelValue"]),l("a",{class:"ms-2 mb-1",onClick:e[4]||(e[4]=(...n)=>i.navigateToForgotPassword&&i.navigateToForgotPassword(...n))}," Forgot Password? ")]),l("div",te,[a(R,{block:"",type:"submit",color:"#0080ff"},{default:t(()=>[w(" Login ")]),_:1})]),s(r)?(b(),V("div",re,F(s(r)),1)):H("",!0)]),_:1}),a(d,{cols:"12",class:"text-center text-base"},{default:t(()=>[le,a(p,{class:"text-primary ms-2",to:"/register"},{default:t(()=>[w(" Create an account ")]),_:1})]),_:1}),a(d,{cols:"12",class:"d-flex align-center"},{default:t(()=>[a(k),ne,a(k)]),_:1}),a(d,{cols:"12",class:"text-center"},{default:t(()=>[a(E)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(g,{class:"auth-footer-start-tree d-none d-md-block",src:s(U),width:250},null,8,["src"]),a(g,{src:s(q),class:"auth-footer-end-tree d-none d-md-block",width:350},null,8,["src"]),a(g,{class:"auth-footer-mask d-none d-md-block",src:s(I)},null,8,["src"])])}}},ke=C(ie,[["__scopeId","data-v-94cc5257"]]);export{ke as default};
