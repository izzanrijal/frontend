import{a as u}from"./axios-G2rPRu76.js";import{_ as x,f as g,u as b,M as B,g as y,o as d,e as k,w as a,t as p,a as c,d as r,V as D,c as f,J as m,X as S,b as C,Q as M,R}from"./index-4lKx3wrq.js";import{c as z,V as v,a as w,b as A}from"./VCardItem-MOrZfQ2X.js";import{V as N}from"./VGrid-dDLZ6FlL.js";import{a as $}from"./VCard-qxjXagZr.js";import"./VImg-PnDL5qkr.js";const T=l=>(M("data-v-8ac8520d"),l=l(),R(),l),F={style:{color:"#0080ff"}},P={class:"me-n3",style:{padding:"7px"}},q={style:{color:"#0080ff"},class:"font-weight-semibold mb-1"},E={style:{color:"#0080ff"},class:"font-weight-semibold mb-1"},H={key:0,style:{color:"black"},class:"font-weight-semibold mb-1"},J={key:1,style:{color:"black"},class:"font-weight-semibold mb-1"},L=T(()=>c("b",null,"Free",-1)),Q=[L],U={class:"me-n3",style:{padding:"5px","padding-block-start":"10px"}},X={__name:"MembershipDetail",setup(l){const e=g(null),n=b(),i=B();var s=localStorage.getItem("token");y(async()=>{const t=i.query.id;if(s)try{console.log("Membership id: ",t);const o=await u.get("https://gateway.berkompeten.com/api/student/master/membership/detail?id="+t,{headers:{Authorization:`Bearer ${s}`}});e.value=o.data.membership,console.log("Membership detail: ",e)}catch(o){o.response&&o.response.status===401&&(localStorage.removeItem("token"),localStorage.removeItem("profile"),n.push("https://gateway.berkompeten.com/login"))}else n.push("https://gateway.berkompeten.com/login")});const h=t=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(t),V=t=>t.length>50?t.substring(0,35)+"...":t,I=async t=>{try{console.log("token: ",s),console.log("id: ",t);const o=await u.post("https://gateway.berkompeten.com/api/student/create-bill-payment",{id:t},{headers:{Authorization:`Bearer ${s}`}}),_=o.data.data.link_url;console.log("resp reset password: ",o),window.location.href="https://"+_}catch(o){console.error("reset password error:",o)}};return(t,o)=>e.value?(d(),k($,{key:0,class:"vcardtext-container"},{default:a(()=>[r(z,null,{default:a(()=>[c("span",F,"Membership "+p(e.value.name),1)]),_:1}),r(v,null,{default:a(()=>[r(w,{cols:"12",md:"12"},{default:a(()=>[r(A,null,{default:a(()=>[r(N,{color:e.value.is_active?"#0080ff":"#cccccc",rounded:"",size:"38",class:"elevation-2"},{default:a(()=>[r(D,{size:"24",icon:"ri-apps-line"})]),_:1},8,["color"]),c("div",P,[c("p",q," Periode Aktivasi: "+p(e.value.activation_period)+" Bulan ",1),c("p",E," Deskripsi paket: "+p(V(e.value.description)),1),e.value.price!==0?(d(),f("p",H,[c("b",null,"Harga: "+p(h(e.value.price)),1)])):m("",!0),e.value.price===0?(d(),f("p",J,Q)):m("",!0)]),c("div",U,[r(S,{block:"",type:"submit",onClick:o[0]||(o[0]=_=>I(e.value.id)),color:e.value.is_active?"#0080ff":"#cccccc"},{default:a(()=>[C(" Langganan ")]),_:1},8,["color"])])]),_:1})]),_:1})]),_:1})]),_:1})):m("",!0)}},j=x(X,[["__scopeId","data-v-8ac8520d"]]),ee={__name:"membership-template-detail",setup(l){const e=localStorage.getItem("token"),n=g(null),i=b();return y(async()=>{if(e)try{const s=await u.get("https://gateway.berkompeten.com/api/student/profile",{headers:{Authorization:`Bearer ${e}`}});n.value=s.data}catch(s){s.response&&s.response.status===401&&i.push("https://gateway.berkompeten.com/login")}else i.push("https://gateway.berkompeten.com/login")}),(s,h)=>(d(),k(v,{class:"match-height"},{default:a(()=>[r(w,{cols:"12",md:"12"},{default:a(()=>[r(j)]),_:1})]),_:1}))}};export{ee as default};
