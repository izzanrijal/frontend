import{b as e,r as a,V as s,Z as r,c as t,l,O as o,B as n,v as i,D as d,u,A as m,P as c,a2 as p,Y as f,R as v,S as w,$ as g,a0 as h}from"./vendor-B8wJr56A.js";import{a as y,b as _,_ as b}from"./auth-v1-tree-DdG3tOOo.js";import{l as x}from"./berkompeten_logo-CQUigQgy.js";import{a as V,b as j}from"./auth-v1-mask-light-Dw7KYw8D.js";import{a as k}from"./axios-fZjk1EK6.js";import{_ as I,g as S}from"./index-BybbEtVx.js";import{V as q,c as C,e as P,a as A,b as L}from"./VCard-BTRoFlXY.js";import{V as D}from"./VImg-BQNpmpCN.js";import{V as E,a as R}from"./VForm-DLjuBkGr.js";import{V as T}from"./VDivider-y75Mkrp8.js";import{J as U}from"./vuetify-C3ORsIgB.js";import"./VGrid-BNFjx_dy.js";import"./index-CGl-i1fy.js";import"./VInput-CdEx-irj.js";import"./forwardRefs-BiNqQvLW.js";const G=e=>(g("data-v-94010e1d"),e=e(),h(),e),H={class:"auth-wrapper d-flex align-center justify-center pa-4"},J={class:"d-flex"},M=["innerHTML"],$=G((()=>c("div",{class:"d-flex align-center mt-1 mb-4"},null,-1))),z=G((()=>c("div",{id:"turnstile-container-register",class:"mb-2"},null,-1))),B={key:0,class:"mt-2 text-danger",style:{color:"#ff5252"}},F=G((()=>c("span",null,"Already have an account?",-1))),K=G((()=>c("span",{class:"mx-4"},"or",-1))),N=I({__name:"register",setup(g){const h=e(null),I=a({username:"",email:"",password:"",confirm_password:"",privacyPolicies:!1}),G=U(),N=s(),O=r(),Y=t((()=>"light"===G.global.name.value?V:j)),Z=e(!1),Q=e(!1),W=e(null),X=()=>{window.turnstile?(h.value&&window.turnstile.remove(h.value),h.value=window.turnstile.render("#turnstile-container-register",{sitekey:"1x00000000000000000000AA",theme:"light",callback:function(e){var a;const s=document.createElement("input");s.type="hidden",s.name="cf-turnstile-response",s.value=e;const r=document.querySelector('input[name="cf-turnstile-response"]');r&&r.remove(),null==(a=document.querySelector("form"))||a.appendChild(s)},"expired-callback":()=>{X()},"error-callback":()=>{},appearance:"interaction-only"})):setTimeout(X,500)},ee=async()=>{var e;if(W.value="",""==I.email)return void(W.value="email is required");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(I.email))return void(W.value="Invalid email format");if(""==I.password)return void(W.value="password is required");if(I.password.length<8)return void(W.value="password length must be 8 character or more");if(""==I.confirm_password)return void(W.value="confirm password is required");if(I.confirm_password.length<8)return void(W.value="confirm password length must be 8 character or more");if(I.password!==I.confirm_password)return void(W.value="Password and confirm password do not match");const a=null==(e=document.querySelector('[name="cf-turnstile-response"]'))?void 0:e.value,s={email:I.email,password:I.password};a&&(s["cf-turnstile-response"]=a);try{await k.post("https://gateway.berkompeten.id/api/student/register/step/1",s);localStorage.setItem("email",I.email),localStorage.setItem("password",I.password),localStorage.setItem("confirm_password",I.confirm_password),N.push("/register-step-2")}catch(r){if(r.response&&r.response.data){if(r.response.data.errors.email)return void(W.value=r.response.data.errors.email[0]);if(429===r.response.status||r.response.data.errors&&"string"==typeof r.response.data.errors&&r.response.data.errors.toLowerCase().includes("captcha"))return X(),void(W.value="Please try again");W.value=r.response.data.errors}}};return l((()=>{const e=localStorage.getItem("email"),a=O.query.email,s=O.query.name;a&&(I.email=a,localStorage.setItem("email",I.email),localStorage.setItem("name",s),N.push("/register")),e&&(I.email=e),X()})),(e,a)=>{const s=m("RouterLink");return n(),o("div",H,[i(q,{class:"auth-card pa-4 pt-7","max-width":"448"},{default:d((()=>[i(C,{class:"justify-center"},{prepend:d((()=>[c("div",J,[c("div",{innerHTML:u(x)},null,8,M)])])),_:1}),i(P,null,{default:d((()=>[i(E,{onSubmit:p((()=>{}),["prevent"])},{default:d((()=>[i(A,null,{default:d((()=>[i(L,{cols:"12"},{default:d((()=>[i(R,{modelValue:I.email,"onUpdate:modelValue":a[0]||(a[0]=e=>I.email=e),label:"Email",placeholder:"example@email.com",type:"email"},null,8,["modelValue"])])),_:1}),i(L,{cols:"12"},{default:d((()=>[i(R,{modelValue:I.password,"onUpdate:modelValue":a[1]||(a[1]=e=>I.password=e),label:"Password",placeholder:"············",type:Z.value?"text":"password","append-inner-icon":Z.value?"ri-eye-off-line":"ri-eye-line","onClick:appendInner":a[2]||(a[2]=e=>Z.value=!Z.value)},null,8,["modelValue","type","append-inner-icon"])])),_:1}),i(L,{cols:"12"},{default:d((()=>[i(R,{modelValue:I.confirm_password,"onUpdate:modelValue":a[3]||(a[3]=e=>I.confirm_password=e),label:"Confirm Password",placeholder:"············",type:Q.value?"text":"password","append-inner-icon":Q.value?"ri-eye-off-line":"ri-eye-line","onClick:appendInner":a[4]||(a[4]=e=>Q.value=!Q.value)},null,8,["modelValue","type","append-inner-icon"]),$,z,i(S,{block:"",type:"submit",color:"#0080ff",onClick:ee},{default:d((()=>[v(" Next ")])),_:1}),W.value?(n(),o("div",B,w(W.value),1)):f("",!0)])),_:1}),i(L,{cols:"12",class:"text-center text-base"},{default:d((()=>[F,i(s,{class:"text-primary ms-2",to:"login"},{default:d((()=>[v(" Sign in instead ")])),_:1})])),_:1}),i(L,{cols:"12",class:"d-flex align-center"},{default:d((()=>[i(T),K,i(T)])),_:1}),i(L,{cols:"12",class:"text-center"},{default:d((()=>[i(b)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),i(D,{class:"auth-footer-start-tree d-none d-md-block",src:u(y),width:250},null,8,["src"]),i(D,{src:u(_),class:"auth-footer-end-tree d-none d-md-block",width:350},null,8,["src"]),i(D,{class:"auth-footer-mask d-none d-md-block",src:Y.value},null,8,["src"])])}}},[["__scopeId","data-v-94010e1d"]]);export{N as default};
