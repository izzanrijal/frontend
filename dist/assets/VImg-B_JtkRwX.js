import{v as e,c as r,K as t,h as a,x as l,s,b as n,j as i,a6 as o,y as u,o as c,M as v,N as d,F as g,Y as p}from"./vendor-BrUfZ_qe.js";import{g as m,p as f,e as b,b as y,S,o as _,x as h}from"./vuetify-BGzDg8SZ.js";import{j,q as z}from"./index-BAywq0Ob.js";const I=f({aspectRatio:[String,Number],contentClass:String,inline:Boolean,...y(),...z()},"VResponsive"),w=m()({name:"VResponsive",props:I(),setup(t,a){let{slots:l}=a;const{aspectStyles:s}=function(e){return{aspectStyles:r((()=>{const r=Number(e.aspectRatio);return r?{paddingBottom:String(1/r*100)+"%"}:void 0}))}}(t),{dimensionStyles:n}=j(t);return b((()=>{var r;return e("div",{class:["v-responsive",{"v-responsive--inline":t.inline},t.class],style:[n.value,t.style]},[e("div",{class:"v-responsive__sizer",style:s.value},null),null==(r=l.additional)?void 0:r.call(l),l.default&&e("div",{class:["v-responsive__content",t.contentClass]},[l.default()])])})),{}}}),R=f({transition:{type:[Boolean,String,Object],default:"fade-transition",validator:e=>!0!==e}},"transition"),B=(e,r)=>{let{slots:s}=r;const{transition:n,disabled:i,...o}=e,{component:u=t,...c}="object"==typeof n?n:{};return a(u,l("string"==typeof n?{name:i?"":n}:c,o,{disabled:i}),s)};function V(e,r){var t;const a=null==(t=e._observe)?void 0:t[r.instance.$.uid];a&&(a.observer.unobserve(e),delete e._observe[r.instance.$.uid])}const x={mounted:function(e,r){if(!S)return;const t=r.modifiers||{},a=r.value,{handler:l,options:s}="object"==typeof a?a:{handler:a,options:{}},n=new IntersectionObserver((function(){var a;let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;const i=null==(a=e._observe)?void 0:a[r.instance.$.uid];if(!i)return;const o=s.some((e=>e.isIntersecting));!l||t.quiet&&!i.init||t.once&&!o&&!i.init||l(o,s,n),o&&t.once?V(e,r):i.init=!0}),s);e._observe=Object(e._observe),e._observe[r.instance.$.uid]={init:!1,observer:n},n.observe(e)},unmounted:V},N=f({alt:String,cover:Boolean,draggable:{type:[Boolean,String],default:void 0},eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},crossorigin:String,referrerpolicy:String,srcset:String,position:String,...I(),...y(),...R()},"VImg"),O=m()({name:"VImg",directives:{intersect:x},props:N(),emits:{loadstart:e=>!0,load:e=>!0,error:e=>!0},setup(t,a){let{emit:m,slots:f}=a;const y=_("VImg"),j=s(""),z=n(),I=s(t.eager?"loading":"idle"),R=s(),V=s(),x=r((()=>t.src&&"object"==typeof t.src?{src:t.src.src,srcset:t.srcset||t.src.srcset,lazySrc:t.lazySrc||t.src.lazySrc,aspect:Number(t.aspectRatio||t.src.aspect||0)}:{src:t.src,srcset:t.srcset,lazySrc:t.lazySrc,aspect:Number(t.aspectRatio||0)})),N=r((()=>x.value.aspect||R.value/V.value||0));function O(e){if((!t.eager||!e)&&(!S||e||t.eager)){if(I.value="loading",x.value.lazySrc){const e=new Image;e.src=x.value.lazySrc,U(e,null)}x.value.src&&u((()=>{var e;m("loadstart",(null==(e=z.value)?void 0:e.currentSrc)||x.value.src),setTimeout((()=>{var e;if(!y.isUnmounted)if(null==(e=z.value)?void 0:e.complete){if(z.value.naturalWidth||$(),"error"===I.value)return;N.value||U(z.value,null),"loading"===I.value&&W()}else N.value||U(z.value),q()}))}))}}function W(){var e;y.isUnmounted||(q(),U(z.value),I.value="loaded",m("load",(null==(e=z.value)?void 0:e.currentSrc)||x.value.src))}function $(){var e;y.isUnmounted||(I.value="error",m("error",(null==(e=z.value)?void 0:e.currentSrc)||x.value.src))}function q(){const e=z.value;e&&(j.value=e.currentSrc||e.src)}i((()=>t.src),(()=>{O("idle"!==I.value)})),i(N,((e,r)=>{!e&&r&&z.value&&U(z.value)})),o((()=>O()));let T=-1;function U(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;const t=()=>{if(clearTimeout(T),y.isUnmounted)return;const{naturalHeight:a,naturalWidth:l}=e;a||l?(R.value=l,V.value=a):e.complete||"loading"!==I.value||null==r?(e.currentSrc.endsWith(".svg")||e.currentSrc.startsWith("data:image/svg+xml"))&&(R.value=1,V.value=1):T=window.setTimeout(t,r)};t()}c((()=>{clearTimeout(T)}));const F=r((()=>({"v-img__img--cover":t.cover,"v-img__img--contain":!t.cover}))),M=()=>{var r;if(!x.value.src||"idle"===I.value)return null;const a=e("img",{class:["v-img__img",F.value],style:{objectPosition:t.position},src:x.value.src,srcset:x.value.srcset,alt:t.alt,crossorigin:t.crossorigin,referrerpolicy:t.referrerpolicy,draggable:t.draggable,sizes:t.sizes,ref:z,onLoad:W,onError:$},null),l=null==(r=f.sources)?void 0:r.call(f);return e(B,{transition:t.transition,appear:!0},{default:()=>[v(l?e("picture",{class:"v-img__picture"},[l,a]):a,[[p,"loaded"===I.value]])]})},P=()=>e(B,{transition:t.transition},{default:()=>[x.value.lazySrc&&"loaded"!==I.value&&e("img",{class:["v-img__img","v-img__img--preload",F.value],style:{objectPosition:t.position},src:x.value.lazySrc,alt:t.alt,crossorigin:t.crossorigin,referrerpolicy:t.referrerpolicy,draggable:t.draggable},null)]}),A=()=>f.placeholder?e(B,{transition:t.transition,appear:!0},{default:()=>[("loading"===I.value||"error"===I.value&&!f.error)&&e("div",{class:"v-img__placeholder"},[f.placeholder()])]}):null,C=()=>f.error?e(B,{transition:t.transition,appear:!0},{default:()=>["error"===I.value&&e("div",{class:"v-img__error"},[f.error()])]}):null,H=()=>t.gradient?e("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${t.gradient})`}},null):null,k=s(!1);{const e=i(N,(r=>{r&&(requestAnimationFrame((()=>{requestAnimationFrame((()=>{k.value=!0}))})),e())}))}return b((()=>{const r=w.filterProps(t);return v(e(w,l({class:["v-img",{"v-img--booting":!k.value},t.class],style:[{width:h("auto"===t.width?R.value:t.width)},t.style]},r,{aspectRatio:N.value,"aria-label":t.alt,role:t.alt?"img":void 0}),{additional:()=>e(g,null,[e(M,null,null),e(P,null,null),e(H,null,null),e(A,null,null),e(C,null,null)]),default:f.default}),[[d("intersect"),{handler:O,options:t.options},null,{once:!0}]])})),{currentSrc:j,image:z,state:I,naturalWidth:R,naturalHeight:V}}});export{x as I,B as M,O as V,R as m};
