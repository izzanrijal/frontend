import{a as _,V as x}from"./VGrid-BrTsUZEX.js";import{_ as B,f as b,u as y,M as D,g as k,o as n,e as h,w as s,d as r,a as c,t as u,V as S,c as g,J as d,X as C,b as M,Q as R,R as z}from"./index-B2FyqnRx.js";import{d as A,a as v,b as w,c as N,V as $}from"./VCard-B89hFbUg.js";import"./VImg-DxD3jx-y.js";const T=l=>(R("data-v-6820f1a7"),l=l(),z(),l),F={style:{color:"#0080ff"}},P={class:"me-n3",style:{padding:"7px"}},q={style:{color:"#0080ff"},class:"font-weight-semibold mb-1"},E={style:{color:"#0080ff"},class:"font-weight-semibold mb-1"},H={key:0,style:{color:"black"},class:"font-weight-semibold mb-1"},J={key:1,style:{color:"black"},class:"font-weight-semibold mb-1"},L=T(()=>c("b",null,"Free",-1)),Q=[L],U={class:"me-n3",style:{padding:"5px","padding-block-start":"10px"}},X={__name:"MembershipDetail",setup(l){const e=b(null),i=y(),p=D();var a=localStorage.getItem("token");k(async()=>{const t=p.query.id;if(a)try{console.log("Membership id: ",t);const o=await _.get("https://gateway.berkompeten.comapi/student/master/membership/detail?id="+t,{headers:{Authorization:`Bearer ${a}`}});e.value=o.data.membership,console.log("Membership detail: ",e)}catch(o){o.response&&o.response.status===401&&(localStorage.removeItem("token"),localStorage.removeItem("profile"),i.push("https://gateway.berkompeten.comlogin"))}else i.push("https://gateway.berkompeten.comlogin")});const f=t=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(t),V=t=>t.length>50?t.substring(0,35)+"...":t,I=async t=>{try{console.log("token: ",a),console.log("id: ",t);const o=await _.post("https://gateway.berkompeten.comapi/student/create-bill-payment",{id:t},{headers:{Authorization:`Bearer ${a}`}}),m=o.data.data.link_url;console.log("resp payment: ",o),console.log("link: ",m),window.location.href="https://"+m}catch(o){console.error("payment process error:",o)}};return(t,o)=>e.value?(n(),h($,{key:0,class:"vcardtext-container"},{default:s(()=>[r(A,null,{default:s(()=>[c("span",F,"Membership "+u(e.value.name),1)]),_:1}),r(v,null,{default:s(()=>[r(w,{cols:"12",md:"12"},{default:s(()=>[r(N,null,{default:s(()=>[r(x,{color:e.value.is_active?"#0080ff":"#cccccc",rounded:"",size:"38",class:"elevation-2"},{default:s(()=>[r(S,{size:"24",icon:"ri-apps-line"})]),_:1},8,["color"]),c("div",P,[c("p",q," Periode Aktivasi: "+u(e.value.activation_period)+" Bulan ",1),c("p",E," Deskripsi paket: "+u(V(e.value.description)),1),e.value.price!==0?(n(),g("p",H,[c("b",null,"Harga: "+u(f(e.value.price)),1)])):d("",!0),e.value.price===0?(n(),g("p",J,Q)):d("",!0)]),c("div",U,[e.value.is_current===!1&&e.value.is_can_upgrade===!0?(n(),h(C,{key:0,block:"",type:"submit",onClick:o[0]||(o[0]=m=>I(e.value.id)),color:e.value.is_active?"#0080ff":"#cccccc"},{default:s(()=>[M(" Langganan ")]),_:1},8,["color"])):d("",!0)])]),_:1})]),_:1})]),_:1})]),_:1})):d("",!0)}},j=B(X,[["__scopeId","data-v-6820f1a7"]]),Y={__name:"membership-template-detail",setup(l){const e=localStorage.getItem("token"),i=b(null),p=y();return k(async()=>{if(e)try{const a=await _.get("https://gateway.berkompeten.comapi/student/profile",{headers:{Authorization:`Bearer ${e}`}});i.value=a.data}catch(a){a.response&&a.response.status===401&&p.push("https://gateway.berkompeten.comlogin")}else p.push("https://gateway.berkompeten.comlogin")}),(a,f)=>(n(),h(v,{class:"match-height"},{default:s(()=>[r(w,{cols:"12",md:"12"},{default:s(()=>[r(j)]),_:1})]),_:1}))}};export{Y as default};
