import{a as g}from"./axios-G2rPRu76.js";import{u as b,f as n,g as S,o as s,e as m,w as t,H as a,S as B,d as o,J as c,X as C,b as T,t as h,c as d}from"./index-4lKx3wrq.js";import{a as V,V as k}from"./VCardItem-MOrZfQ2X.js";import{a as I,V as y}from"./VCard-qxjXagZr.js";import{V as M,a as N}from"./VTextField-HE9rSi11.js";import"./VGrid-dDLZ6FlL.js";import"./VImg-PnDL5qkr.js";import"./VInput-F18oTe3o.js";import"./index-eVj4sFZC.js";import"./forwardRefs-g5bhJaRn.js";const O={key:1,class:"mt-2 text-success"},R={key:2,class:"mt-2 text-danger",style:{color:"#ff5252"}},$={__name:"OtpVerification",setup(x){const p=b(),r=n(!1),u=n(""),i=n(""),l=n(""),f=localStorage.getItem("token");S(async()=>{try{const e=await g.get("https://gateway.berkompeten.com/api/student/change-password/status",{headers:{Authorization:`Bearer ${f}`}});r.value=e.data.data.otp_submitted}catch(e){console.log("err: ",e),e.response&&e.response.status===401&&(localStorage.removeItem("token"),localStorage.removeItem("profile"),p.push("https://gateway.berkompeten.com/login"))}});const v=async()=>{try{const e=await g.post("https://gateway.berkompeten.com/api/student/otp-verification",{otp:l},{headers:{Authorization:`Bearer ${f}`}});console.log("resp otp: ",e),u.value=e.data.message,p.push("https://gateway.berkompeten.com/profile/security")}catch(e){console.error("reset otp:",e),i.value=e.response.data.message}};return(e,_)=>(s(),m(k,null,{default:t(()=>[o(V,{cols:"12"},{default:t(()=>[o(I,{title:"Otp"},{default:t(()=>[o(M,null,{default:t(()=>[a(r)==!0?(s(),m(y,{key:0},{default:t(()=>[o(k,null,{default:t(()=>[o(V,{cols:"12",md:"6"},{default:t(()=>[o(N,{modelValue:a(l),"onUpdate:modelValue":_[0]||(_[0]=w=>B(l)?l.value=w:null),label:"OTP",autocomplete:"on",placeholder:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})):c("",!0),o(y,{class:"d-flex flex-wrap gap-4"},{default:t(()=>[a(r)==!0?(s(),m(C,{key:0,onClick:v},{default:t(()=>[T("Save changes")]),_:1})):c("",!0),a(u)?(s(),d("div",O,h(a(u)),1)):c("",!0),a(i)?(s(),d("div",R,h(a(i)),1)):c("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},j={__name:"otp",setup(x){return(p,r)=>(s(),d("div",null,[o($)]))}};export{j as default};
